<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>我的足迹地图</title>
<style>
body, html {
    margin: 0; padding: 0; height: 100vh; width: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background-color: #f4f7f9; display: flex; justify-content: center; align-items: center;
}
.page-container {
    display: flex; width: 90%; max-width: 1400px; height: 85vh;
    background: #fff; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 12px; overflow: hidden;
}
#map-container { flex: 3; height: 100%; }
#chinaMap { width: 100%; height: 100%; }
#sidebar {
    flex: 1; padding: 25px; border-left: 1px solid #e0e0e0;
    overflow-y: auto; background-color: #fafcfe;
}
#sidebar h2 {
    margin-top: 0; margin-bottom: 20px; color: #333; font-size: 22px;
    border-bottom: 2px solid #5cacec; padding-bottom: 10px;
}
#city-list { list-style: none; padding: 0; margin: 0; }
#city-list li {
    padding: 12px 15px; margin-bottom: 8px; border-radius: 6px; cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    border: 1px solid #ddd; background-color: #fff;
}
#city-list li:hover {
    background-color: #eaf6ff; transform: scale(1.03); border-color: #5cacec;
}
#city-list li .city-name { font-weight: 500; color: #333; }
#city-list li .travel-time { font-size: 12px; color: #777; margin-top: 4px; }
.tooltip-card {
    padding: 10px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    background: #fff; width: 220px; border: 1px solid #ccc;
}
.tooltip-card img { width: 100%; height: auto; border-radius: 4px; margin-top: 8px; }
.tooltip-card .city { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 4px; }
.tooltip-card .time { font-size: 13px; color: #666; }
</style>
</head>
<body>
<div class="page-container">
<div id="map-container">
<div id="chinaMap"></div>
</div>
<div id="sidebar">
<h2>足迹列表</h2>
<ul id="city-list"></ul>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const travelData = [
      { name: "澳门特别行政区", time: "2024年6月", img: "https://i.imgs.ovh/2025/08/04/YFM1A.jpeg" },
      { name: "广州市", time: "2024年3月", img: "https://file.ipadown.com/tophub/assets/images/default_ava1.jpg" },
    ];
    const chartDom = document.getElementById('chinaMap');
    const myChart = echarts.init(chartDom);
    const cityList = document.getElementById('city-list');

<pre><code>travelData.forEach(city =&gt; &#123;
    const li = document.createElement(&#39;li&#39;);
    li.setAttribute(&#39;data-city&#39;, city.name);
    li.innerHTML = `&lt;div class=&quot;city-name&quot;&gt;$&#123;city.name&#125;&lt;/div&gt;&lt;div class=&quot;travel-time&quot;&gt;$&#123;city.time&#125;&lt;/div&gt;`;
    cityList.appendChild(li);

    // 鼠标悬停时，高亮地图对应区域
    li.addEventListener(&#39;mouseover&#39;, () =&gt; myChart.dispatchAction(&#123; type: &#39;highlight&#39;, name: city.name &#125;));
    li.addEventListener(&#39;mouseout&#39;, () =&gt; myChart.dispatchAction(&#123; type: &#39;downplay&#39;, name: city.name &#125;));

    // --- 【新增功能】 ---
    // 当点击列表项时，手动触发地图的 tooltip 显示
    li.addEventListener(&#39;click&#39;, () =&gt; &#123;
        myChart.dispatchAction(&#123;
            type: &#39;showTip&#39;,    // 动作类型：显示提示框
            seriesIndex: 0,     // 指定在第一个系列上触发
            name: city.name     // 告诉 ECharts 要为哪个城市显示提示框
        &#125;);
    &#125;);
    // --------------------
&#125;);

fetch(&#39;/travel-map/city.geojson&#39;)
  .then(r =&gt; r.json())
  .then(geoJson =&gt; &#123;
    echarts.registerMap(&#39;china-city&#39;, geoJson);
    const option = &#123;
      tooltip: &#123;
        trigger: &#39;item&#39;,
        // confine: true, // 如果希望 tooltip 不会超出图表范围，可以取消此行注释
        formatter: function(params) &#123;
          const info = travelData.find(d =&gt; d.name === params.name);
          if (info) &#123;
            return `&lt;div class=&quot;tooltip-card&quot;&gt;&lt;div class=&quot;city&quot;&gt;$&#123;params.name&#125;&lt;/div&gt;&lt;div class=&quot;time&quot;&gt;旅行时间：$&#123;info.time&#125;&lt;/div&gt;&lt;img src=&quot;$&#123;info.img&#125;&quot;&gt;&lt;/div&gt;`;
          &#125;
          return params.name;
        &#125;
      &#125;,
      series: [&#123;
        type: &#39;map&#39;,
        map: &#39;china-city&#39;,
        roam: true,
        itemStyle: &#123; areaColor: &#39;#e9f1f6&#39;, borderColor: &#39;#b9d4e9&#39;, borderWidth: 1 &#125;,
        emphasis: &#123; label: &#123; show: false &#125;, itemStyle: &#123; areaColor: &#39;#87CEFA&#39; &#125;&#125;,
        data: travelData.map(d =&gt; (&#123; name: d.name, itemStyle: &#123; areaColor: &#39;#5cacec&#39; &#125;&#125;))
      &#125;]
    &#125;;
    myChart.setOption(option);
  &#125;)
  .catch(error =&gt; &#123;
      console.error(&quot;加载地图数据失败:&quot;, error);
      chartDom.innerHTML = &quot;地图数据加载失败，请检查GeoJSON文件路径或网络连接。&quot;;
  &#125;);

window.addEventListener(&#39;resize&#39;, () =&gt; myChart.resize());
</code></pre>
<p>});<br></script></p>
</body>
</html>